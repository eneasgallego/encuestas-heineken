<link rel="import" href="../polymer/polymer.html">

<link rel="import" href="../app-layout/app-toolbar/app-toolbar.html">
<link rel="import" href="../app-layout/app-drawer/app-drawer.html">
<link rel="import" href="../app-layout/app-header-layout/app-header-layout.html">
<link rel="import" href="../app-layout/app-drawer-layout/app-drawer-layout.html">
<link rel="import" href="../app-layout/app-header/app-header.html">
<link rel="import" href="../app-layout/app-scroll-effects/effects/waterfall.html">

<link rel="import" href="hnk-menu.html">

<link rel="import" href="../util/hnk-base.html">
<link rel="import" href="../util/hnk-spinner.html">
<link rel="import" href="../util/shared-styles.html">

<dom-module id="hnk-page">
    <template>
        <style include="shared-styles">
            :host {
                display: block;

                --app-drawer-content-container: {
                     background-color: var(--color-fuerte, green);
                 };
            }

            app-header {
            @apply(--mixin-fondo);
            }
            .usuario {
                font-size: 0.5rem;
                display: block;
                height: auto;
                text-align: right;
            }
            #toolbar {
                flex-direction: column;
                padding-left: 0;
                width: 100%;
            }
            #toolbar app-toolbar {
                padding-left: 0;
                width: 100%;
                padding-right: 0;
            }
            h1 {
                font-size: 1.2rem;
                margin: 0;
            }
        </style>

        <app-drawer-layout>
            <app-drawer id="drawer">
                <hnk-menu
                    menu="[[menu]]"
                    menu-seleccionado="{{menuSeleccionado}}"
                ></hnk-menu>
            </app-drawer>

            <app-header-layout>
                <app-header condenses effects="waterfall">
                    <app-toolbar>
                        <app-toolbar id="toolbar" sticky>
                            <app-toolbar>
                                <paper-icon-button icon="menu" drawer-toggle></paper-icon-button>
                                <app-toolbar>
                                    <app-toolbar>
                                        <h1>Encuestas Heineken</h1>
                                    </app-toolbar>
                                </app-toolbar>
                            </app-toolbar>
                            <app-toolbar class="usuario">
                                [[usuario.nombre]]
                            </app-toolbar>
                        </app-toolbar>
                    </app-toolbar>
                </app-header>

                <div>
                    <content></content>
                </div>
            </app-header-layout>
        </app-drawer-layout>

        <hnk-spinner
            mostrar="[[mostrarSpinner]]"
        ></hnk-spinner>
    </template>

    <script>
        Polymer({
            is: 'hnk-page',
            behaviors: [hnk.BaseBehavior],
            properties: {
                usuario: Object,
                mostrarSpinner: Boolean,
                menu: {
                    type: Array,
                    value: function(){return []}
                },
                menuSeleccionado: {
                    type: Object,
                    notify: true,
                    observer: '_observerMenuSeleccionado'
                }
            },
            _observerMenuSeleccionado: function(menuSeleccionado) {
                (!this.$.drawer.persistent) && this.$.drawer.close();
            }
        });
    </script>
</dom-module>
